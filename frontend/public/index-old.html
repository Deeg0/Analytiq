<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnalytIQ - AI-Powered Scientific Study Analysis</title>
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="assets/AnalytIQlogo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              border: "hsl(var(--border))",
              input: "hsl(var(--input))",
              ring: "hsl(var(--ring))",
              background: "hsl(var(--background))",
              foreground: "hsl(var(--foreground))",
              primary: {
                DEFAULT: "hsl(var(--primary))",
                foreground: "hsl(var(--primary-foreground))",
              },
              secondary: {
                DEFAULT: "hsl(var(--secondary))",
                foreground: "hsl(var(--secondary-foreground))",
              },
              destructive: {
                DEFAULT: "hsl(var(--destructive))",
                foreground: "hsl(var(--destructive-foreground))",
              },
              muted: {
                DEFAULT: "hsl(var(--muted))",
                foreground: "hsl(var(--muted-foreground))",
              },
              accent: {
                DEFAULT: "hsl(var(--accent))",
                foreground: "hsl(var(--accent-foreground))",
              },
              card: {
                DEFAULT: "hsl(var(--card))",
                foreground: "hsl(var(--card-foreground))",
              },
            },
            borderRadius: {
              lg: "var(--radius)",
              md: "calc(var(--radius) - 2px)",
              sm: "calc(var(--radius) - 4px)",
            },
          },
        },
      }
    </script>
    <link rel="stylesheet" href="css/tailwind.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-logo">
                    <img src="assets/AnalytIQlogo.png" alt="AnalytIQ Logo" class="logo-image">
                </div>
            <h1>Analyt<span class="brand-iq">IQ</span></h1>
            <p class="subtitle">AI-powered analysis of scientific research credibility, bias, and reliability</p>
            <div class="auth-header">
                <span id="user-info" class="user-info hidden"></span>
                <button id="signup-button" class="auth-button auth-button-secondary">Sign Up</button>
                <button id="auth-button" class="auth-button">Sign In</button>
            </div>
            </div>
        </header>

        <main>
            <!-- Input Section -->
            <section id="input-section" class="input-section">
                <div class="tabs">
                    <button class="tab-button active" data-tab="url">URL</button>
                    <button class="tab-button" data-tab="text">Text/Abstract</button>
                </div>

                <!-- URL Tab -->
                <div class="tab-content active" id="url-tab">
                    <div class="input-group">
                        <label for="url-input">Enter Study URL:</label>
                        <input type="url" id="url-input" placeholder="https://example.com/research-study">
                    </div>
                    <button type="button" class="submit-button" onclick="analyzeUrl()">Analyze Study</button>
                </div>

                <!-- Text Tab -->
                <div class="tab-content" id="text-tab">
                    <div class="input-group">
                        <label for="text-input">Paste Study Text or Abstract:</label>
                        <textarea id="text-input" rows="10" placeholder="Paste the study text, abstract, or full content here..."></textarea>
                    </div>
                    <button type="button" class="submit-button" onclick="analyzeText()">Analyze Study</button>
                </div>
            </section>

            <!-- Loading Section -->
            <section id="loading-section" class="loading-section hidden">
                <div class="loading-spinner"></div>
                <p>Analyzing study... This may take a minute.</p>
            </section>

            <!-- Results Section -->
            <section id="results-section" class="results-section hidden">
                <!-- SECTION 1: Overview & Score -->
                <div class="results-section-group">
                    <div class="section-header">
                        <h2>üìä Overview</h2>
                    </div>
                    
                <!-- Overall Score Card -->
                <div class="score-card" id="score-card">
                    <div class="score-circle" id="score-circle">
                        <span class="score-number" id="score-number">0</span>
                        <span class="score-label">Trust Score</span>
                    </div>
                    <div class="score-details">
                        <h2 id="score-rating">Moderately Reliable</h2>
                        <p id="score-description">Analysis complete</p>
                    </div>
                </div>

                <!-- Evidence Hierarchy -->
                <div class="evidence-hierarchy" id="evidence-hierarchy" style="display: none;">
                    <h3>Evidence Hierarchy</h3>
                    <div class="hierarchy-info" id="hierarchy-info"></div>
                </div>

                <!-- Category Breakdown -->
                <div class="categories">
                    <h3>Category Breakdown</h3>
                    <div class="category-grid" id="category-grid"></div>
                </div>
                </div>

                <!-- SECTION 2: Critical Issues -->
                <div class="results-section-group" id="flaws-section-group" style="display: none;">
                    <div class="section-header">
                        <h2>‚ö†Ô∏è Critical Issues</h2>
                    </div>
                    
                    <div class="flaws-summary" id="flaws-summary">
                        <div class="flaws-header">
                            <h3>Issues Found</h3>
                            <div class="flaws-count" id="flaws-count"></div>
                        </div>
                        <div class="flaws-grid" id="flaws-grid"></div>
                    </div>
                </div>

                <!-- SECTION 3: Detailed Analysis -->
                <div class="results-section-group">
                    <div class="section-header">
                        <h2>üìù Detailed Analysis</h2>
                </div>

                <!-- View Toggle -->
                <div class="view-toggle">
                    <button class="view-button active" data-view="simple">Simple Summary</button>
                    <button class="view-button" data-view="technical">Technical Critique</button>
                    <button class="view-button" data-view="bias">Bias Report</button>
                </div>

                <!-- Simple Summary View -->
                <div class="view-content active" id="simple-view">
                    <h3>Summary</h3>
                    <div class="content-box" id="simple-summary"></div>
                </div>

                <!-- Technical Critique View -->
                <div class="view-content" id="technical-view">
                    <h3>Technical Critique</h3>
                    <div class="content-box" id="technical-critique"></div>
                    
                        <div class="technical-details-grid">
                            <div class="technical-detail-section">
                    <h3>Category Details</h3>
                    <div class="category-details" id="category-details"></div>
                            </div>

                            <div class="technical-detail-section">
                                <h3>All Issues & Fallacies</h3>
                    <div class="issues-list" id="issues-list"></div>
                    
                    <h3>Confounders & Validity Threats</h3>
                    <div class="validity-threats" id="validity-threats"></div>
                            </div>
                        </div>
                </div>

                <!-- Bias Report View -->
                <div class="view-content" id="bias-view">
                    <h3>Bias Analysis</h3>
                    <div class="content-box" id="bias-report"></div>
                    
                    <h3>Expert Context</h3>
                    <div class="content-box" id="expert-context"></div>
                    </div>
                </div>

                <!-- SECTION 4: Recommendations -->
                <div class="results-section-group">
                    <div class="section-header">
                        <h2>üí° Recommendations</h2>
                    </div>
                <div class="recommendations">
                    <ul id="recommendations-list"></ul>
                    </div>
                </div>

                <!-- SECTION 5: Study Information -->
                <div class="results-section-group">
                    <div class="section-header">
                        <h2>üìÑ Study Information</h2>
                    </div>
                <div class="metadata">
                    <div class="metadata-grid" id="metadata-grid"></div>
                    </div>
                </div>
            </section>

            <!-- Error Section -->
            <section id="error-section" class="error-section hidden">
                <div class="error-box">
                    <h3>Error</h3>
                    <p id="error-message"></p>
                </div>
            </section>
        </main>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="auth-modal hidden">
        <div class="auth-modal-content">
            <button class="auth-modal-close" onclick="hideAuthModal()">&times;</button>
            <h2>Welcome to AnalytIQ</h2>
            
            <!-- Auth Tabs -->
            <div class="auth-tabs">
                <button id="signin-tab" class="auth-tab active" onclick="switchAuthTab('signin')">Sign In</button>
                <button id="signup-tab" class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button>
            </div>
            
            <!-- Error/Success Message -->
            <div id="auth-error" class="auth-message hidden"></div>
            
            <!-- Sign In Form -->
            <form id="signin-form" class="auth-form" onsubmit="handleSignIn(event)">
                <div class="form-group">
                    <label for="signin-email">Email</label>
                    <input type="email" id="signin-email" name="email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="signin-password">Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="signin-password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        <button type="button" class="password-toggle" onclick="togglePassword('signin-password', this)">
                            <span class="password-toggle-icon">üëÅÔ∏è</span>
                        </button>
                    </div>
                </div>
                <button type="submit" class="auth-submit-button">Sign In</button>
                <div class="auth-divider">
                    <span>or</span>
                </div>
                <button type="button" class="auth-google-button" onclick="handleGoogleSignIn()">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.64 9.20454C17.64 8.56636 17.5827 7.95272 17.4764 7.36363H9V10.845H13.8436C13.635 11.97 13.0009 12.9231 12.0477 13.5613V15.8195H15.9564C17.4382 14.2527 18.3182 11.9454 18.3182 9.20454H17.64Z" fill="#4285F4"/>
                        <path d="M9 18C11.43 18 13.467 17.1941 14.9564 15.8195L12.0477 13.5613C11.2418 14.1013 10.2109 14.4204 9 14.4204C6.65455 14.4204 4.67182 12.8372 3.96409 10.71H0.957275V13.0418C2.43818 15.9831 5.48182 18 9 18Z" fill="#34A853"/>
                        <path d="M3.96409 10.71C3.78409 10.17 3.68182 9.59318 3.68182 9C3.68182 8.40681 3.78409 7.83 3.96409 7.29V4.95818H0.957273C0.347727 6.17318 0 7.54772 0 9C0 10.4523 0.347727 11.8268 0.957273 13.0418L3.96409 10.71Z" fill="#FBBC05"/>
                        <path d="M9 3.57955C10.3214 3.57955 11.5077 4.03364 12.4405 4.92545L15.0218 2.34409C13.4632 0.891818 11.4259 0 9 0C5.48182 0 2.43818 2.01682 0.957275 4.95818L3.96409 7.29C4.67182 5.16273 6.65455 3.57955 9 3.57955Z" fill="#EA4335"/>
                    </svg>
                    Sign in with Google
                </button>
            </form>
            
            <!-- Sign Up Form -->
            <form id="signup-form" class="auth-form hidden" onsubmit="handleSignUp(event)">
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" name="email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="signup-password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6">
                        <button type="button" class="password-toggle" onclick="togglePassword('signup-password', this)">
                            <span class="password-toggle-icon">üëÅÔ∏è</span>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="signup-confirm-password">Confirm Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="signup-confirm-password" name="confirm-password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6">
                        <button type="button" class="password-toggle" onclick="togglePassword('signup-confirm-password', this)">
                            <span class="password-toggle-icon">üëÅÔ∏è</span>
                        </button>
                    </div>
                </div>
                <button type="submit" class="auth-submit-button">Sign Up</button>
                <div class="auth-divider">
                    <span>or</span>
                </div>
                <button type="button" class="auth-google-button" onclick="handleGoogleSignIn()">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.64 9.20454C17.64 8.56636 17.5827 7.95272 17.4764 7.36363H9V10.845H13.8436C13.635 11.97 13.0009 12.9231 12.0477 13.5613V15.8195H15.9564C17.4382 14.2527 18.3182 11.9454 18.3182 9.20454H17.64Z" fill="#4285F4"/>
                        <path d="M9 18C11.43 18 13.467 17.1941 14.9564 15.8195L12.0477 13.5613C11.2418 14.1013 10.2109 14.4204 9 14.4204C6.65455 14.4204 4.67182 12.8372 3.96409 10.71H0.957275V13.0418C2.43818 15.9831 5.48182 18 9 18Z" fill="#34A853"/>
                        <path d="M3.96409 10.71C3.78409 10.17 3.68182 9.59318 3.68182 9C3.68182 8.40681 3.78409 7.83 3.96409 7.29V4.95818H0.957273C0.347727 6.17318 0 7.54772 0 9C0 10.4523 0.347727 11.8268 0.957273 13.0418L3.96409 10.71Z" fill="#FBBC05"/>
                        <path d="M9 3.57955C10.3214 3.57955 11.5077 4.03364 12.4405 4.92545L15.0218 2.34409C13.4632 0.891818 11.4259 0 9 0C5.48182 0 2.43818 2.01682 0.957275 4.95818L3.96409 7.29C4.67182 5.16273 6.65455 3.57955 9 3.57955Z" fill="#EA4335"/>
                    </svg>
                    Sign up with Google
                </button>
            </form>
        </div>
    </div>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>

